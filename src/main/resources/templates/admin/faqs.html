<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Manage FAQs | Admin</title>
  <link rel="stylesheet" th:href="@{/css/admin.css}">
  <style>
    body {
        background-color: #0e0e0e;
        color: #fff;
        font-family: 'Poppins', sans-serif;
    }
    h1 {
        color: #00bfff;
        text-align: center;
        margin-top: 20px;
        text-shadow: 0 0 8px #00bfff;
    }
    .container {
        display: grid;
        grid-template-columns: 30% 35% 35%;
        gap: 20px;
        padding: 30px;
    }
    .card {
        background: #151515;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 0 15px rgba(0, 191, 255, 0.1);
    }
    .card h2 {
        color: #00bfff;
        margin-bottom: 15px;
    }
    input, textarea {
        width: 100%;
        background: #1e1e1e;
        border: 1px solid #333;
        color: white;
        padding: 8px;
        border-radius: 6px;
        margin-bottom: 10px;
    }
    .btn {
        border: none;
        border-radius: 6px;
        padding: 6px 12px;
        font-weight: 600;
        cursor: pointer;
        transition: 0.2s ease;
        margin-right: 5px;
    }
    .btn:hover { opacity: 0.85; }
    .btn-blue { background-color: #0099ff; color: white; }
    .btn-green { background-color: #28a745; color: white; }
    .btn-red { background-color: #dc3545; color: white; }
    .btn-yellow { background-color: #ffc107; color: black; }
    hr { border: 0.5px solid #333; margin: 10px 0; }
  </style>
</head>
<body>
<h1>Manage FAQs</h1>

<div class="container">

  <!-- Left Column -->
  <div class="card">
    <h2>Create / Edit FAQ</h2>
    <form th:action="@{/admin/faqs/save}" method="post" th:object="${faq}">
      <label>Question</label>
      <input type="text" th:field="*{question}" placeholder="Enter question...">
      <label>Answer</label>
      <textarea th:field="*{answer}" rows="4" placeholder="Write answer here..."></textarea>
      <button type="submit" class="btn btn-blue">Save FAQ</button>
    </form>
  </div>

  <!-- Middle Column -->
  <div class="card">
    <h2>All FAQs</h2>
    <div th:if="${#lists.isEmpty(items)}"><p>No FAQs yet.</p></div>
    <div th:each="f : ${items}">
      <p style="color:#00bfff;font-weight:600;" th:text="${f.question}"></p>
      <p style="color:#ccc;" th:text="${f.answer}"></p>
      <div>
        <a th:href="@{'/admin/faqs/edit/' + ${f.id}}" class="btn btn-yellow">Edit</a>
        <form th:action="@{'/admin/faqs/delete/' + ${f.id}}" method="post" style="display:inline;">
          <button type="submit" class="btn btn-red">Delete</button>
        </form>
      </div>
      <hr>
    </div>
  </div>

  <!-- Right Column -->
  <div class="card">
    <h2>Viewer Queries</h2>
    <div th:if="${#lists.isEmpty(queries)}"><p>No queries submitted.</p></div>
    <div th:each="q : ${queries}">
      <p><strong style="color:#00bfff;" th:text="${q.name}"></strong>
        (<span style="color:#ccc;" th:text="${q.email}"></span>)</p>
      <p style="color:#eee;" th:text="${q.question}"></p>
      <div>
        <a th:href="@{'/admin/faqs/prefill/' + ${q.id}}" class="btn btn-blue">Prefill</a>
        <form th:action="@{'/admin/faqs/promote/' + ${q.id}}" method="post" style="display:inline;">
          <button type="submit" class="btn btn-green">Add to FAQ</button>
        </form>
        <form th:action="@{'/admin/faqs/query/delete/' + ${q.id}}" method="post" style="display:inline;">
          <button type="submit" class="btn btn-red">Delete</button>
        </form>
      </div>
      <hr>
    </div>


    <div style="position: absolute; top: 20px; right: 40px;">
      <a href="/admin/dashboard"
         style="background-color: #007bff; color: white; padding: 8px 16px; border-radius: 8px; text-decoration: none; font-weight: bold; transition: 0.2s;">
        ‚Üê Back to Dashboard
      </a>
    </div>
    <style>
      a[href="/admin/dashboard"]:hover {
          background-color: #0056b3;
      }
    </style>

  </div>

</div>
</body>
</html>
