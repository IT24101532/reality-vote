<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Manage Contestants | RealityVote</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background: radial-gradient(circle at top right, #2b2b2b, #0d0d0d);
      color: #fff;
      font-family: 'Poppins', sans-serif;
      min-height: 100vh;
    }
    .nav {
      background: rgba(0,0,0,0.85);
      padding: 15px 40px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid rgba(255,0,0,0.4);
      box-shadow: 0 0 15px rgba(255,0,0,0.25);
    }
    .nav h3 { color:#e10600; font-weight:700; }
    .nav a {
      background:#e10600; color:white; padding:8px 18px;
      border-radius:6px; text-decoration:none; font-weight:600;
      transition:0.3s;
    }
    .nav a:hover { background:#b00500; box-shadow:0 0 10px #e10600; }
    .main-container {
      max-width: 1100px; margin:50px auto;
      background:rgba(255,255,255,0.05);
      border-radius:15px; padding:30px;
      box-shadow:0 0 20px rgba(255,0,0,0.15);
      backdrop-filter:blur(10px);
    }
    table { width:100%; color:white; }
    th { color:#e10600; border-bottom:1px solid rgba(255,255,255,0.2); padding-bottom:10px; }
    td { padding:12px 8px; border-bottom:1px solid rgba(255,255,255,0.1); vertical-align:middle; }
    .btn-danger, .btn-primary {
      font-weight:600; border:none;
    }
    .btn-danger { background:#e10600; }
    .btn-danger:hover { background:#ff1a1a; }
  </style>
</head>
<body>
<div class="nav">
  <h3>RealityVote Admin</h3>
  <div>
    <a href="/admin/dashboard">Dashboard</a>
    <a href="/admin/contestants/create">Create New Contestant</a>
  </div>
</div>
<div th:if="${success}" class="alert alert-success text-center mt-3" role="alert"
     style="font-weight:600; background:#1a1a1a; color:#00ff7f; border:1px solid #00ff7f; border-radius:8px;">
  <span th:text="${success}"></span>
</div>

<div th:if="${error}" class="alert alert-danger text-center mt-3" role="alert"
     style="font-weight:600; background:#1a1a1a; color:#ff4d4d; border:1px solid #ff4d4d; border-radius:8px;">
  <span th:text="${error}"></span>
</div>


<div class="main-container">
  <h2 class="mb-4">All Contestants</h2>
  <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>


  <table>
    <thead>
    <tr>
      <th>Name</th>
      <th>Shows</th>
      <th>Account</th>
      <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="c : ${contestants}">
      <td th:text="${c.name}">Name</td>
      <td>
  <span th:each="p, iterStat : ${c.programs}">
    <span th:text="${p.name}"></span>
    <span th:if="${!iterStat.last}">, </span>
  </span>
      </td>

      <td th:text="${c.account != null ? c.account.username : 'â€”'}">Account</td>
      <td>
        <a th:href="@{'/admin/contestants/assign/' + ${c.id}}" class="btn btn-primary btn-sm me-2">Assign Shows</a>
        <a th:href="@{'/admin/contestants/delete/' + ${c.id}}" class="btn btn-danger btn-sm">Delete</a>
      </td>
    </tr>
    </tbody>
  </table>

  <p th:if="${#lists.isEmpty(contestants)}" class="text-muted">No contestants found.</p>
</div>
</body>
</html>
